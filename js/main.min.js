function dowmdiv(){document.body.scrollHeight>window.innerHeight?($("#bottom-outer").css({position:"relative"}),$("#top-button").css({display:"block"})):($(".up").css({display:"none"}),$("#bottom-outer").css({position:"absolute",bottom:0,left:0}))}NProgress.start(),NProgress.done(),function(){window.onload=function(){$(".progress").animate({opacity:0}),$("body").css({"overflow-x":"auto"})},$(".post-fix").animate({opacity:0},1e3),setTimeout(function(){$(".progress").animate({opacity:0}).css({display:"none"})},1e3)}(),$(function(){$(".lazy").lazyload({effect:"fadeIn"})}),function(){var t=$("body").width();t<=768?$(function(){function e(){var e=0,i=(t-250)/2+"px";$(".friends-link").each(function(){var t=$(this),n=200*e;e++,setTimeout(function(){t.animate({"margin-left":i,opacity:1},300)},n)})}$(document).on("pjax:end",function(){e()}),window.onload=e()}):$(function(){function t(){var t=0;$(".friends-link").each(function(){var e=$(this);t++;var i=200*t;setTimeout(function(){e.animate({"margin-left":"150px",opacity:1},300)},i)})}$(document).on("pjax:end",function(){t()}),window.onload=t()})}(),function(){$(".button-collapse").sideNav({menuWidth:250,edge:"left",closeOnClick:!1,draggable:!0}),$(document).on("pjax:end",function(){$(".button-collapse").sideNav("hide")})}(),function(){$(".dropdown-btn").click(function(){"none"==$(this).next().css("display")?($(this).next().slideDown(),$(this).find(".dropdown-ico").rotate({animateTo:180})):($(this).next().slideUp(),$(this).find(".dropdown-ico").rotate({animateTo:0}))})}(),function(){$("#top-button").click(function(){$("html,body").animate({scrollTop:0},500)})}(),function(){document.body.scrollHeight>window.innerHeight?($("#bottom-outer").css({position:"relative"}),$("#top-button").css({display:"block"})):($(".up").css({display:"none"}),$("#bottom-outer").css({position:"absolute",bottom:0,left:0}))}();var searchFunc=function(t,e,i){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var n=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),a=document.getElementById(e),o=document.getElementById(i);a.addEventListener("input",function(){var t='<ul class="search-result-list">',e=this.value.trim().toLowerCase().split(/[\s\-]+/);o.innerHTML="",this.value.trim().length<=0||(n.forEach(function(i){var n=!0,a=i.title.trim().toLowerCase(),o=i.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),s=i.url,r=-1,h=-1,l=-1;if(""!=a&&""!=o&&e.forEach(function(t,e){r=a.indexOf(t),h=o.indexOf(t),r<0&&h<0?n=!1:(h<0&&(h=0),0==e&&(l=h))}),n){t+="<li><a href='"+s+"' class='search-result-title' target='_blank'>"+a;var c=i.content.trim().replace(/<[^>]+>/g,"");if(l>=0){var _=l-6,f=l+6;_<0&&(_=0),0==_&&(f=10),f>c.length&&(f=c.length);var u=c.substr(_,f);e.forEach(function(t){var e=new RegExp(t,"gi");u=u.replace(e,'<em class="search-keyword">'+t+"</em>")}),t+='<p class="search-result">'+u+"...</p></a>"}}}),o.innerHTML=t)})}})},inputArea=document.querySelector("#local-search-input"),getSearchFile=function(){searchFunc("/search.xml","local-search-input","local-search-result")};inputArea.onfocus=function(){getSearchFile()},inputArea.onkeydown=function(){if(13==event.keyCode)return!1},$("#local-search-result").bind("DOMNodeRemoved DOMNodeInserted",function(t){$(t.target).text()?$(".no-result").hide():$(".no-result").show()}),function(t){t.fn.exist=function(){return t(this).length>=1}}(jQuery),function(){$(".post-toc-btn").click(function(){$(".post-toc").exist()?$(".post-toc-box").fadeToggle():$(".post-toc-none").fadeToggle()})}(),function(){var t=$("html, body");$(".post-toc-link").click(function(){return t.animate({scrollTop:$($.attr(this,"href")).offset().top},500),!1})}(),function(){var t=$(".post-author-link");$(".post-author-button").click(function(){"none"===t.css("display")?t.css({display:"block"}).animate({right:"60px",opacity:1},500):(t.animate({opacity:0},500),setTimeout(function(){t.css({display:"none",right:"100px"})},500))})}();var throttle=function(t,e,i){var n=null,a=null;return function(){var o=+new Date;a||(a=o),i&&o-a>i?(t(),a=o,clearTimeout(n)):(clearTimeout(n),n=setTimeout(function(){t(),a=null},e))}};!function(){var t=$(".up");window.onscroll=function(){var e=$(window).scrollTop(),i=$(window).height(),n=$(document).height()-e-i;e>=i-80?(n<=90?(t.removeClass("upinbody"),t.addClass("upinfoot")):(t.removeClass("upinfoot"),t.addClass("upinbody")),t.fadeIn(500)):e<=i-80&&t.fadeOut(500)}}(),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery||window.Zepto)}(function(t,e){function i(){}function n(t,e){return(e._$container==f?("innerHeight"in _?_.innerHeight:f.height())+f.scrollTop():e._$container.offset().top+e._$container.height())<=t.offset().top-e.threshold}function a(e,i){return(i._$container==f?f.width()+(t.fn.scrollLeft?f.scrollLeft():_.pageXOffset):i._$container.offset().left+i._$container.width())<=e.offset().left-i.threshold}function o(t,e){return(e._$container==f?f.scrollTop():e._$container.offset().top)>=t.offset().top+e.threshold+t.height()}function s(e,i){return(i._$container==f?t.fn.scrollLeft?f.scrollLeft():_.pageXOffset:i._$container.offset().left)>=e.offset().left+i.threshold+e.width()}function r(t,e){var i=0;t.each(function(r,h){function l(){c.trigger("_lazyload_appear"),i=0}var c=t.eq(r);if(!(c.width()<=0&&c.height()<=0||"none"===c.css("display")))if(e.vertical_only)if(o(c,e));else if(n(c,e)){if(++i>e.failure_limit)return!1}else l();else if(o(c,e)||s(c,e));else if(n(c,e)||a(c,e)){if(++i>e.failure_limit)return!1}else l()})}function h(t){return t.filter(function(e,i){return!t.eq(e)._lazyload_loadStarted})}function l(t,e){function i(){s=0,r=+new Date,o=t.apply(n,a),n=null,a=null}var n,a,o,s,r=0;return function(){n=this,a=arguments;var t=new Date-r;return s||(t>=e?i():s=setTimeout(i,e-t)),o}}var c,_=window,f=t(_),u={threshold:0,failure_limit:0,event:"scroll",effect:"show",effect_params:null,container:_,data_attribute:"original",data_srcset_attribute:"original-srcset",skip_invisible:!0,appear:i,load:i,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:i,no_fake_img_loader:!1,placeholder_data_img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",placeholder_real_img:"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png"};c=function(){var t=Object.prototype.toString;return function(e){return t.call(e).replace("[object ","").replace("]","")}}(),t.fn.hasOwnProperty("lazyload")||(t.fn.lazyload=function(e){var n,a,o,s=this;return t.isPlainObject(e)||(e={}),t.each(u,function(i,n){-1!=t.inArray(i,["threshold","failure_limit","check_appear_throttle_time"])?"String"==c(e[i])?e[i]=parseInt(e[i],10):e[i]=n:"container"==i?(e.hasOwnProperty(i)?e[i]==_||e[i]==document?e._$container=f:e._$container=t(e[i]):e._$container=f,delete e.container):!u.hasOwnProperty(i)||e.hasOwnProperty(i)&&c(e[i])==c(u[i])||(e[i]=n)}),n="scroll"==e.event,o=0==e.check_appear_throttle_time?r:l(r,e.check_appear_throttle_time),a=n||"scrollstart"==e.event||"scrollstop"==e.event,s.each(function(n,o){var r=this,l=s.eq(n),c=l.attr("src"),_=l.attr("data-"+e.data_attribute),f=e.url_rewriter_fn==i?_:e.url_rewriter_fn.call(r,l,_),u=l.attr("data-"+e.data_srcset_attribute),d=l.is("img");return 1==l._lazyload_loadStarted||c==f?(l._lazyload_loadStarted=!0,void(s=h(s))):(l._lazyload_loadStarted=!1,d&&!c&&l.one("error",function(){l.attr("src",e.placeholder_real_img)}).attr("src",e.placeholder_data_img),l.one("_lazyload_appear",function(){function n(){a&&l.hide(),d?(u&&l.attr("srcset",u),f&&l.attr("src",f)):l.css("background-image",'url("'+f+'")'),a&&l[e.effect].apply(l,o?e.effect_params:[]),s=h(s)}var a,o=t.isArray(e.effect_params);l._lazyload_loadStarted||(a="show"!=e.effect&&t.fn[e.effect]&&(!e.effect_params||o&&0==e.effect_params.length),e.appear!=i&&e.appear.call(r,l,s.length,e),l._lazyload_loadStarted=!0,e.no_fake_img_loader||u?(e.load!=i&&l.one("load",function(){e.load.call(r,l,s.length,e)}),n()):t("<img />").one("load",function(){n(),e.load!=i&&e.load.call(r,l,s.length,e)}).attr("src",f))}),void(a||l.on(e.event,function(){l._lazyload_loadStarted||l.trigger("_lazyload_appear")})))}),a&&e._$container.on(e.event,function(){o(s,e)}),f.on("resize load",function(){o(s,e)}),t(function(){o(s,e)}),this})}),function(k){for(var d,f,l=document.getElementsByTagName("head")[0].style,h=["transformProperty","WebkitTransform","OTransform","msTransform","MozTransform"],g=0;g<h.length;g++)void 0!==l[h[g]]&&(d=h[g]);d&&(f=d.replace(/[tT]ransform/,"TransformOrigin"),"T"==f[0]&&(f[0]="t")),eval('IE = "v"=="\v"'),jQuery.fn.extend({rotate:function(t){if(0!==this.length&&void 0!==t){"number"==typeof t&&(t={angle:t});for(var e=[],i=0,n=this.length;i<n;i++){var a=this.get(i);if(a.Wilq32&&a.Wilq32.PhotoEffect)a.Wilq32.PhotoEffect._handleRotation(t);else{var o=k.extend(!0,{},t),a=new Wilq32.PhotoEffect(a,o)._rootObj;e.push(k(a))}}return e}},getRotateAngle:function(){for(var t=[],e=0,i=this.length;e<i;e++){var n=this.get(e);n.Wilq32&&n.Wilq32.PhotoEffect&&(t[e]=n.Wilq32.PhotoEffect._angle)}return t},stopRotate:function(){for(var t=0,e=this.length;t<e;t++){var i=this.get(t);i.Wilq32&&i.Wilq32.PhotoEffect&&clearTimeout(i.Wilq32.PhotoEffect._timer)}}}),Wilq32=window.Wilq32||{},Wilq32.PhotoEffect=function(){return d?function(t,e){t.Wilq32={PhotoEffect:this},this._img=this._rootObj=this._eventObj=t,this._handleRotation(e)}:function(t,e){if(this._img=t,this._onLoadDelegate=[e],this._rootObj=document.createElement("span"),this._rootObj.style.display="inline-block",this._rootObj.Wilq32={PhotoEffect:this},t.parentNode.insertBefore(this._rootObj,t),t.complete)this._Loader();else{var i=this;jQuery(this._img).bind("load",function(){i._Loader()})}}}(),Wilq32.PhotoEffect.prototype={_setupParameters:function(t){this._parameters=this._parameters||{},"number"!=typeof this._angle&&(this._angle=0),"number"==typeof t.angle&&(this._angle=t.angle),this._parameters.animateTo="number"==typeof t.animateTo?t.animateTo:this._angle,this._parameters.step=t.step||this._parameters.step||null,this._parameters.easing=t.easing||this._parameters.easing||this._defaultEasing,this._parameters.duration=t.duration||this._parameters.duration||1e3,this._parameters.callback=t.callback||this._parameters.callback||this._emptyFunction,this._parameters.center=t.center||this._parameters.center||["50%","50%"],this._rotationCenterX="string"==typeof this._parameters.center[0]?parseInt(this._parameters.center[0],10)/100*this._imgWidth*this._aspectW:this._parameters.center[0],this._rotationCenterY="string"==typeof this._parameters.center[1]?parseInt(this._parameters.center[1],10)/100*this._imgHeight*this._aspectH:this._parameters.center[1],t.bind&&t.bind!=this._parameters.bind&&this._BindEvents(t.bind)},_emptyFunction:function(){},_defaultEasing:function(t,e,i,n,a){return-n*((e=e/a-1)*e*e*e-1)+i},_handleRotation:function(t,e){d||this._img.complete||e?(this._setupParameters(t),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()):this._onLoadDelegate.push(t)},_BindEvents:function(t){if(t&&this._eventObj){if(this._parameters.bind){var e,i=this._parameters.bind;for(e in i)i.hasOwnProperty(e)&&jQuery(this._eventObj).unbind(e,i[e])}this._parameters.bind=t;for(e in t)t.hasOwnProperty(e)&&jQuery(this._eventObj).bind(e,t[e])}},_Loader:function(){return IE?function(){var t=this._img.width,e=this._img.height;for(this._imgWidth=t,this._imgHeight=e,this._img.parentNode.removeChild(this._img),this._vimage=this.createVMLNode("image"),this._vimage.src=this._img.src,this._vimage.style.height=e+"px",this._vimage.style.width=t+"px",this._vimage.style.position="absolute",this._vimage.style.top="0px",this._vimage.style.left="0px",this._aspectW=this._aspectH=1,this._container=this.createVMLNode("group"),this._container.style.width=t,this._container.style.height=e,this._container.style.position="absolute",this._container.style.top="0px",this._container.style.left="0px",this._container.setAttribute("coordsize",t-1+","+(e-1)),this._container.appendChild(this._vimage),this._rootObj.appendChild(this._container),this._rootObj.style.position="relative",this._rootObj.style.width=t+"px",this._rootObj.style.height=e+"px",this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._eventObj=this._rootObj;t=this._onLoadDelegate.shift();)this._handleRotation(t,!0)}:function(){this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._imgWidth=this._img.naturalWidth,this._imgHeight=this._img.naturalHeight;var t=Math.sqrt(this._imgHeight*this._imgHeight+this._imgWidth*this._imgWidth);for(this._width=3*t,this._height=3*t,this._aspectW=this._img.offsetWidth/this._img.naturalWidth,this._aspectH=this._img.offsetHeight/this._img.naturalHeight,this._img.parentNode.removeChild(this._img),this._canvas=document.createElement("canvas"),this._canvas.setAttribute("width",this._width),this._canvas.style.position="relative",this._canvas.style.left=-this._img.height*this._aspectW+"px",this._canvas.style.top=-this._img.width*this._aspectH+"px",this._canvas.Wilq32=this._rootObj.Wilq32,this._rootObj.appendChild(this._canvas),this._rootObj.style.width=this._img.width*this._aspectW+"px",this._rootObj.style.height=this._img.height*this._aspectH+"px",this._eventObj=this._canvas,this._cnv=this._canvas.getContext("2d");t=this._onLoadDelegate.shift();)this._handleRotation(t,!0)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer),this._animateStartTime=+new Date,this._animateStartAngle=this._angle,this._animate()},_animate:function(){var t=+new Date,e=t-this._animateStartTime>this._parameters.duration;if(e&&!this._parameters.animatedGif)clearTimeout(this._timer);else{(this._canvas||this._vimage||this._img)&&(t=this._parameters.easing(0,t-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration),this._rotate(~~(10*t)/10)),this._parameters.step&&this._parameters.step(this._angle);var i=this;this._timer=setTimeout(function(){i._animate.call(i)},10)}this._parameters.callback&&e&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){var t=Math.PI/180;return IE?function(t){this._angle=t,this._container.style.rotation=t%360+"deg",this._vimage.style.top=-(this._rotationCenterY-this._imgHeight/2)+"px",this._vimage.style.left=-(this._rotationCenterX-this._imgWidth/2)+"px",this._container.style.top=this._rotationCenterY-this._imgHeight/2+"px",this._container.style.left=this._rotationCenterX-this._imgWidth/2+"px"}:d?function(t){this._angle=t,this._img.style[d]="rotate("+t%360+"deg)",this._img.style[f]=this._parameters.center.join(" ")}:function(e){this._angle=e,e=e%360*t,this._canvas.width=this._width,this._canvas.height=this._height,this._cnv.translate(this._imgWidth*this._aspectW,this._imgHeight*this._aspectH),this._cnv.translate(this._rotationCenterX,this._rotationCenterY),this._cnv.rotate(e),this._cnv.translate(-this._rotationCenterX,-this._rotationCenterY),this._cnv.scale(this._aspectW,this._aspectH),this._cnv.drawImage(this._img,0,0)}}()},IE&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<rvml:"+t+' class="rvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}())}(jQuery);